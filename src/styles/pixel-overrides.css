/* 像素风格 shadcn/ui 组件覆盖 */

@import './pixel-art.css';

/* 覆盖根变量为像素风格 */
:root {
  /* 重新映射 shadcn 变量到像素风格 */
  --background: var(--pixel-white);
  --foreground: var(--pixel-black);

  --card: var(--pixel-white);
  --card-foreground: var(--pixel-black);

  --popover: var(--pixel-white);
  --popover-foreground: var(--pixel-black);

  --primary: var(--pixel-blue);
  --primary-foreground: var(--pixel-white);

  --secondary: var(--pixel-gray-light);
  --secondary-foreground: var(--pixel-black);

  --muted: var(--pixel-gray-light);
  --muted-foreground: var(--pixel-gray-dark);

  --accent: var(--pixel-yellow);
  --accent-foreground: var(--pixel-black);

  --destructive: var(--pixel-red);
  --destructive-foreground: var(--pixel-white);

  --border: var(--pixel-black);
  --input: var(--pixel-black);
  --ring: var(--pixel-blue);

  /* 禁用圆角 - 像素风格应该是方形的 */
  --radius: 0px;
}

/* 全局字体覆盖 */
body {
  font-family: var(--pixel-font-secondary);
  background: var(--pixel-white);
  color: var(--pixel-black);
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--pixel-font-primary) !important;
  text-transform: uppercase;
  letter-spacing: 1px;
}

h1 { font-size: 20px !important; }
h2 { font-size: 16px !important; }
h3 { font-size: 14px !important; }
h4 { font-size: 12px !important; }
h5 { font-size: 10px !important; }
h6 { font-size: 8px !important; }

/* Button 组件像素化 */
.bg-primary,
button[class*="bg-primary"],
[role="button"] {
  font-family: var(--pixel-font-primary) !important;
  font-size: 10px !important;
  text-transform: uppercase;
  border: 4px solid var(--pixel-black) !important;
  box-shadow: var(--pixel-shadow) !important;
  border-radius: 0 !important;
  transition: all 0.1s !important;
}

button:hover,
[role="button"]:hover {
  transform: translate(-2px, -2px);
  box-shadow: 6px 6px 0px rgba(0, 0, 0, 0.25) !important;
}

button:active,
[role="button"]:active {
  transform: translate(2px, 2px);
  box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.25) !important;
}

/* Card 组件像素化 */
[class*="rounded"],
[class*="card"] {
  border-radius: 0 !important;
  border: 4px solid var(--pixel-black) !important;
  box-shadow: var(--pixel-shadow) !important;
  position: relative;
}

/* Input 组件像素化 */
input,
textarea,
select {
  font-family: var(--pixel-font-secondary) !important;
  border: 3px solid var(--pixel-black) !important;
  border-radius: 0 !important;
  background: var(--pixel-white) !important;
  padding: 8px 12px !important;
  font-size: 14px !important;
}

input:focus,
textarea:focus,
select:focus {
  outline: none !important;
  box-shadow: var(--pixel-shadow-sm) !important;
  transform: translate(-1px, -1px);
  border-color: var(--pixel-blue) !important;
}

/* Dialog/Modal 像素化 */
[role="dialog"],
[class*="dialog"],
[class*="modal"] {
  border: 6px solid var(--pixel-black) !important;
  border-radius: 0 !important;
  box-shadow: var(--pixel-shadow-lg) !important;
}

/* Alert 组件像素化 */
[role="alert"],
[class*="alert"] {
  border: 4px solid var(--pixel-black) !important;
  border-radius: 0 !important;
  font-family: var(--pixel-font-secondary) !important;
}

/* Badge 组件像素化 */
[class*="badge"] {
  font-family: var(--pixel-font-primary) !important;
  font-size: 8px !important;
  text-transform: uppercase;
  border: 2px solid var(--pixel-black) !important;
  border-radius: 0 !important;
  padding: 2px 6px !important;
}

/* Table 像素化 */
table {
  border-collapse: separate !important;
  border-spacing: 0 !important;
}

th,
td {
  border: 2px solid var(--pixel-black) !important;
  padding: 8px !important;
  font-family: var(--pixel-font-secondary) !important;
}

th {
  background: var(--pixel-gray-light) !important;
  font-family: var(--pixel-font-primary) !important;
  font-size: 10px !important;
  text-transform: uppercase;
}

/* Sidebar 像素化 */
[class*="sidebar"] {
  border-right: 6px solid var(--pixel-black) !important;
  background: var(--pixel-gray-light) !important;
}

/* 滚动条像素化 */
::-webkit-scrollbar {
  width: 16px;
  height: 16px;
}

::-webkit-scrollbar-track {
  background: var(--pixel-gray-light);
  border: 2px solid var(--pixel-black);
}

::-webkit-scrollbar-thumb {
  background: var(--pixel-gray-dark);
  border: 2px solid var(--pixel-black);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--pixel-black);
}

/* 禁用所有过渡效果和圆角 */
* {
  border-radius: 0 !important;
  transition: none !important;
}

/* 重新启用特定的像素风格过渡 */
button,
[role="button"],
input,
textarea,
select {
  transition: all 0.1s !important;
}

/* 像素化图标 */
svg {
  shape-rendering: crispEdges;
  image-rendering: pixelated;
}

/* 特殊效果类 */
.pixel-inset {
  box-shadow: inset 4px 4px 0px rgba(0, 0, 0, 0.25);
}

.pixel-glow {
  animation: pixel-glow 2s ease-in-out infinite;
}

@keyframes pixel-glow {
  0%, 100% {
    box-shadow:
      0 0 10px var(--pixel-blue),
      var(--pixel-shadow);
  }
  50% {
    box-shadow:
      0 0 20px var(--pixel-blue),
      0 0 30px var(--pixel-blue),
      var(--pixel-shadow);
  }
}

/* 像素化 Toast/通知 */
[class*="toast"],
[class*="notification"] {
  border: 4px solid var(--pixel-black) !important;
  border-radius: 0 !important;
  font-family: var(--pixel-font-secondary) !important;
  box-shadow: var(--pixel-shadow) !important;
}

/* 像素化 Tabs */
[role="tablist"] {
  border-bottom: 4px solid var(--pixel-black) !important;
}

[role="tab"] {
  border: 4px solid transparent !important;
  border-bottom: none !important;
  font-family: var(--pixel-font-primary) !important;
  font-size: 10px !important;
  text-transform: uppercase;
}

[role="tab"][aria-selected="true"] {
  border-color: var(--pixel-black) !important;
  background: var(--pixel-white) !important;
  transform: translateY(4px);
}

/* 添加像素网格背景到 body */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 32px,
      rgba(0, 0, 0, 0.02) 32px,
      rgba(0, 0, 0, 0.02) 33px
    ),
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 32px,
      rgba(0, 0, 0, 0.02) 32px,
      rgba(0, 0, 0, 0.02) 33px
    );
  pointer-events: none;
  z-index: -1;
}